/*! For license information please see main.9a630b8c.chunk.js.LICENSE.txt */
(this.webpackJsonpmclient=this.webpackJsonpmclient||[]).push([[0],{47:function(t,e,s){},74:function(t,e){},77:function(t,e,s){"use strict";s.r(e);var i=s(2),n=s.n(i),o=s(37),c=s.n(o),a=(s(47),s(23)),r=s.n(a),l=s(38),h=s(0);class p extends i.Component{render(){return Object(h.jsxs)("header",{className:"main-header",children:[Object(h.jsxs)("a",{href:"",className:"logo",children:[Object(h.jsx)("span",{className:"logo-mini",children:Object(h.jsx)("b",{children:"Map"})}),Object(h.jsxs)("span",{className:"logo-lg",children:[Object(h.jsx)("b",{children:"Map"}),"Provider"]})]}),Object(h.jsx)("nav",{className:"navbar navbar-static-top",children:Object(h.jsx)("a",{href:"",className:"sidebar-toggle","data-toggle":"push-menu",role:"button",children:Object(h.jsx)("span",{className:"sr-only",children:"Toggle navigation"})})})]})}}class b extends i.Component{constructor(t){super(t)}render(){return Object(h.jsx)("aside",{className:"main-sidebar",children:Object(h.jsxs)("section",{className:"sidebar",children:[Object(h.jsx)("form",{action:"#",method:"get",className:"sidebar-form",children:Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("input",{type:"text",name:"q",className:"form-control",placeholder:"Filter..."}),Object(h.jsx)("span",{className:"input-group-btn",children:Object(h.jsx)("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat",children:Object(h.jsx)("i",{className:"fa fa-search"})})})]})}),Object(h.jsxs)("ul",{className:"sidebar-menu","data-widget":"tree",children:[Object(h.jsx)("li",{className:"header",children:"Controls"}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.resetView()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Reset View"}),Object(h.jsx)("span",{className:"pull-right-container"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.showBus()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Show Bus"}),Object(h.jsx)("span",{className:"pull-right-container"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.showBusTrace()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Show Bus Trace"}),Object(h.jsx)("span",{className:"pull-right-container"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.showTaxi()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Show Taxi"}),Object(h.jsx)("span",{className:"pull-right-container"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.showTrain()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Show Train"}),Object(h.jsx)("span",{className:"pull-right-container"})]})}),Object(h.jsx)("li",{children:Object(h.jsxs)("a",{href:"#",onClick:()=>{this.props.connectToToio()},children:[Object(h.jsx)("i",{className:"fa fa-th"})," ",Object(h.jsx)("span",{children:"Bluetooth Connection"}),Object(h.jsx)("span",{className:"pull-right-container"})]})})]})]})})}}class j extends i.Component{constructor(t){super(t),this.state={component:this.props.component,args:this.props.args}}componentDidMount(){}componentWillUnmount(){}componentWillReceiveProps(t){this.setState(t)}render(){return Object(h.jsx)("div",{className:"content-wrapper",children:n.a.createElement(this.state.component,this.state.args,"")})}}class d{constructor(){console.log("New Message Store"),this.clear()}clear(){this.bus={},this.taxi={},this.train={},this.busTrace={}}addVehicle(t,e){void 0===t[e.id]&&(t[e.id]=[]),t[e.id].length>1e3&&t[e.id].pop(),t[e.id].unshift([e.lat,e.lon,e.angle,e.speed])}addPosition(t){const e=JSON.parse(t);0==e.mtype?this.addVehicle(this.taxi,e):3==e.mtype?this.addVehicle(this.bus,e):2==e.mtype&&this.addVehicle(this.train,e)}getVehicle(t){return 0===t?this.taxi:3==t?this.bus:2==t?this.train:void 0}}var u=s(1),g=s.n(u),m=s(79),x=s(78),O=s(80),f=s(24),v=s(15),w=s(7);!function(){var t=u.Marker.prototype._initIcon,e=u.Marker.prototype._setPos,s="msTransform"===u.DomUtil.TRANSFORM;u.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),u.Marker.include({_initIcon:function(){t.call(this)},_setPos:function(t){e.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[u.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,s?this._icon.style[u.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[u.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})}();class A extends v.a{createLeafletElement(t){const e=new u.Marker(t.position,this.getOptions(t));return this.contextValue=Object(f.a)(Object(f.a)({},t.leaflet),{},{popupContainer:e}),e}updateLeafletElement(t,e){e.position!==t.position&&this.leafletElement.setLatLng(e.position),e.icon!==t.icon&&this.leafletElement.setIcon(e.icon),e.zIndexOffset!==t.zIndexOffset&&this.leafletElement.setZIndexOffset(e.zIndexOffset),e.opacity!==t.opacity&&this.leafletElement.setOpacity(e.opacity),e.draggable!==t.draggable&&(!0===e.draggable?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),e.rotationAngle!==t.rotationAngle&&this.leafletElement.setRotationAngle(e.rotationAngle),e.rotationOrigin!==t.rotationOrigin&&this.leafletElement.setRotationOrigin(e.rotationOrigin)}render(){const t=this.props.children;return null==t||null==this.contextValue?null:Object(h.jsx)(w.a,{value:this.contextValue,children:t})}}var T=Object(w.b)(A),N=(g.a.icon({iconUrl:"img/car_above.png",iconSize:[16,32],iconAnchor:[8,16]}),g.a.icon({iconUrl:"img/car_above.png",iconSize:[32,64],iconAnchor:[16,32]})),S=(g.a.icon({iconUrl:"img/car_above.png",iconSize:[64,128],iconAnchor:[32,64]}),g.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[16,32],iconAnchor:[8,16]}),g.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[32,64],iconAnchor:[16,32]})),y=(g.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[64,128],iconAnchor:[32,64]}),g.a.icon({iconUrl:"img/train_above.png",iconSize:[16,32],iconAnchor:[8,16]}),g.a.icon({iconUrl:"img/train_above.png",iconSize:[32,64],iconAnchor:[16,32]}));g.a.icon({iconUrl:"img/train_above.png",iconSize:[64,128],iconAnchor:[32,64]});class k extends i.Component{constructor(t){super(t),this.vehicleIcon=N,this.busIcon=S,this.trainIcon=y}componentDidMount(){}componentWillUnmount(){}componentWillReceiveProps(t){this.setState(t)}render(){let t=[];if(this.props.taxi){let e=this.props.store.getVehicle(0);Object.keys(e).forEach((function(s){t.push(Object(h.jsx)(T,{position:[e[s][0][0],e[s][0][1]],icon:N,rotationOrigin:N.options.iconAnchor[0]+"px "+N.options.iconAnchor[1]+"px",rotationAngle:[e[s][0][2]]}))}))}if(this.props.bus){let e=this.props.store.getVehicle(3);Object.keys(e).forEach((function(s){t.push(Object(h.jsx)(T,{position:[e[s][0][0],e[s][0][1]],icon:S,rotationOrigin:S.options.iconAnchor[0]+"px "+S.options.iconAnchor[1]+"px",rotationAngle:[e[s][0][2]]}))}))}if(this.props.busTrace){let e=this.props.store.getVehicle(3);Object.keys(e).forEach((function(s){let i=e[s],n=[];i.forEach((function(t){n.push([t[0],t[1]])})),t.push(Object(h.jsx)(m.a,{positions:n}))}))}if(this.props.train){let e=this.props.store.getVehicle(2);Object.keys(e).forEach((function(s){t.push(Object(h.jsx)(T,{position:[e[s][0][0],e[s][0][1]],icon:y,rotationOrigin:y.options.iconAnchor[0]+"px "+y.options.iconAnchor[1]+"px",rotationAngle:[e[s][0][2]]}))}))}let e=Object(h.jsx)("div",{});t.length>0&&(e=t);const s=Object(h.jsxs)(x.a,{center:[34.8594,137.172],zoom:13,children:[Object(h.jsx)(O.a,{url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),e]});return Object(h.jsx)("section",{className:"content",children:s})}}var _=s(41),E=s.n(_);class R extends i.Component{constructor(t){super(t);const e=E()();this.mstore=new d,this.state={store:this.mstore,bus:!0,busTrace:!0,taxi:!0,train:!0},e.on("connect",(()=>{console.log("Socket.IO Connected!")})),e.on("event",this.getEvent.bind(this)),e.on("disconnect",(()=>{console.log("Socket.IO Disconnected!")})),this.selComp=k,this.selArg={store:this.state.store,bus:this.state.bus,busTrace:this.state.busTrace,taxi:this.state.taxi,train:this.state.train}}getEvent(t){this.mstore.addPosition(t),this.setState({store:this.mstore})}resetView(){this.setState({reset:!0}),this.selArg.reset=!0}showBus(){this.setState({bus:!this.state.bus}),this.selArg.bus=this.state.bus}showBusTrace(){this.setState({busTrace:!this.state.busTrace}),this.selArg.busTrace=this.state.busTrace}showTaxi(){this.setState({taxi:!this.state.taxi}),this.selArg.taxi=this.state.taxi}showTrain(){this.selArg.train=!this.state.train,this.setState({train:this.selArg.train})}componentDidMount(){}connectToToio(){return Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"10b20100-5b3b-4571-9508-cf3efcd7bbae","10b20102-5b3b-4571-9508-cf3efcd7bbae",t.next=4,navigator.bluetooth.requestDevice({filters:[{services:["10b20100-5b3b-4571-9508-cf3efcd7bbae"]}]});case 4:console.log("connected!");case 5:case"end":return t.stop()}}),t)})))()}render(){const t=Object(h.jsx)(p,{}),e=Object(h.jsx)(j,{component:this.selComp,args:this.selArg}),s=Object(h.jsx)(b,{clearLogs:()=>this.clearLogs(),showBus:()=>this.showBus(),showBusTrace:()=>this.showBusTrace(),showTaxi:()=>this.showTaxi(),showTrain:()=>this.showTrain(),resetView:()=>this.resetView(),connectToToio:()=>this.connectToToio()});return Object(h.jsxs)("div",{children:[t,s,e]})}}var C=R;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(h.jsx)(C,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((t=>{t.unregister()}))}},[[77,1,2]]]);
//# sourceMappingURL=main.9a630b8c.chunk.js.map